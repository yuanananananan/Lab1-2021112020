(function(){"use strict";var t={4040:function(t,e,r){r.r(e)},5034:function(t,e,r){var a=r(5130),o=r(6768);const n={id:"app"},i=(0,o.Lk)("header",{class:"header"},[(0,o.Lk)("h1",{class:"title"},"有向图可视化操作工具 v0.0.1")],-1),l={class:"container"},s={class:"left-panel"},d={class:"right-panel"};function h(t,e,r,a,h,c){const u=(0,o.g2)("GraphVisualization"),p=(0,o.g2)("BridgeWords"),g=(0,o.g2)("NewTextGeneration"),f=(0,o.g2)("ShortestPath"),m=(0,o.g2)("RandomWalk");return(0,o.uX)(),(0,o.CE)("div",n,[i,(0,o.Lk)("div",l,[(0,o.Lk)("div",s,[(0,o.bF)(u)]),(0,o.Lk)("div",d,[(0,o.bF)(p),(0,o.bF)(g),(0,o.bF)(f),(0,o.bF)(m)])])])}const c={class:"component-box"},u=(0,o.Lk)("h3",null,"有向图可视化",-1),p={width:"0",height:"0",style:{position:"absolute","z-index":"-1"}},g=(0,o.Lk)("defs",null,[(0,o.Lk)("marker",{id:"arrow-highlighted1",viewBox:"0 -5 10 10",refX:"20",refY:"0",markerWidth:"6",markerHeight:"6",orient:"auto"},[(0,o.Lk)("path",{d:"M0,-5L10,0L0,5",fill:"lightskyblue"})]),(0,o.Lk)("marker",{id:"arrow-highlighted2",viewBox:"0 -5 10 10",refX:"20",refY:"0",markerWidth:"6",markerHeight:"6",orient:"auto"},[(0,o.Lk)("path",{d:"M0,-5L10,0L0,5",fill:"salmon"})])],-1),f=[g],m={ref:"svg",class:"graph-container",width:"2000",height:"2000"};function k(t,e,r,a,n,i){return(0,o.uX)(),(0,o.CE)("div",c,[u,(0,o.Lk)("input",{type:"file",onChange:e[0]||(e[0]=(...t)=>i.onFileChange&&i.onFileChange(...t))},null,32),(0,o.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>i.generateGraph&&i.generateGraph(...t))},"生成有向图"),((0,o.uX)(),(0,o.CE)("svg",p,f)),((0,o.uX)(),(0,o.CE)("svg",m,null,512))])}r(4114),r(3375),r(9225),r(3972),r(9209),r(5714),r(7561),r(6197);var b=r(6004),w=r(4373),v=r(595);const x=(0,v.A)();var W=x,y={data(){return{selectedFile:null,simulation:null}},methods:{onFileChange(t){this.selectedFile=t.target.files[0]},async generateGraph(){if(this.selectedFile)try{const t=new FormData;t.append("file",this.selectedFile);const e=await w.A.post("http://localhost:8081/api/graph/upload",t,{headers:{"Content-Type":"multipart/form-data"}}),r=e.data,a=Object.values(r.nodes).map((t=>({id:t.word}))),o=[];Object.values(r.adjList).forEach((t=>{t.forEach((t=>{o.push({source:t.from.word,target:t.to.word,weight:t.weight})}))})),this.renderGraph(a,o)}catch(t){console.error("文件上传失败:",t)}else alert("请先选择一个文件")},renderGraph(t,e){const r=b.Ltv(this.$refs.svg);r.selectAll("*").remove(),this.simulation=b.tXi(t).force("link",b.kJC(e).id((t=>t.id)).distance(20)).force("charge",b.xJS().strength(-200)).force("center",b.jTM(300,200)),r.append("defs").selectAll("marker").data(["arrow"]).enter().append("marker").attr("id",(t=>t)).attr("viewBox","0 -5 10 10").attr("refX",20).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("fill","#999");const a=r.selectAll(".link").data(e).enter().append("line").attr("class","link").attr("stroke","#999").attr("stroke-width",2).attr("marker-end","url(#arrow)"),o=r.selectAll(".text").data(e).enter().append("text").attr("class","text").attr("text-anchor","middle").attr("fill","black").text((t=>t.weight)).attr("dy","-0.5em"),n=r.selectAll(".node").data(t).enter().append("g").attr("class","node").call(b.$Er().on("start",this.dragstarted).on("drag",this.dragged).on("end",this.dragended));n.append("circle").attr("r",10).attr("fill","steelblue"),n.append("text").attr("x",10).attr("y",4).text((t=>t.id)),this.simulation.on("tick",(()=>{a.attr("x1",(t=>t.source.x)).attr("y1",(t=>t.source.y)).attr("x2",(t=>t.target.x)).attr("y2",(t=>t.target.y)),o.attr("x",(t=>(t.source.x+t.target.x)/2)).attr("y",(t=>(t.source.y+t.target.y)/2)),n.attr("transform",(t=>`translate(${t.x},${t.y})`))})),W.on("highlight-bridge-words",(({word1:t,word2:e,bridgeWords:r})=>{n.selectAll("circle").attr("fill",(a=>a.id===t||a.id===e?"gold":r.includes(a.id)?"lightseagreen":"steelblue")),a.attr("stroke",(a=>a.source.id===t&&r.includes(a.target.id)||r.includes(a.source.id)&&a.target.id===e?"lightskyblue":"#999")).attr("marker-end",(a=>a.source.id===t&&r.includes(a.target.id)||r.includes(a.source.id)&&a.target.id===e?"url(#arrow-highlighted1)":"url(#arrow)"))})),W.on("highlight-shortest-path",(({path:t})=>{this.highlightedPath=t;const e=new Set;for(let r=0;r<t.length-1;r++)e.add(`${t[r]}-${t[r+1]}`);a.attr("stroke",(t=>e.has(`${t.source.id}-${t.target.id}`)?"salmon":"#999")).attr("marker-end",(t=>e.has(`${t.source.id}-${t.target.id}`)?"url(#arrow-highlighted2)":"url(#arrow)")),n.selectAll("circle").attr("fill",(e=>t.includes(e.id)?"lightpink":"steelblue"))})),W.on("clear-highlight-all",(()=>{a.attr("stroke",(t=>"#999")).attr("marker-end",(t=>"url(#arrow)")),n.selectAll("circle").attr("fill","steelblue")}))},dragstarted(t,e){t.active||this.simulation.alphaTarget(.3).restart(),e.fx=e.x,e.fy=e.y},dragged(t,e){e.fx=t.x,e.fy=t.y},dragended(t,e){t.active||this.simulation.alphaTarget(0),e.fx=null,e.fy=null}}},L=r(1241);const R=(0,L.A)(y,[["render",k]]);var $=R,T=r(4232);const C=t=>((0,o.Qi)("data-v-d9a7050c"),t=t(),(0,o.jt)(),t),A={class:"component-box"},I=C((()=>(0,o.Lk)("h3",null,"查询桥接词",-1))),_={class:"output-box"};function j(t,e,r,n,i,l){return(0,o.uX)(),(0,o.CE)("div",A,[I,(0,o.bo)((0,o.Lk)("input",{class:"input-box","onUpdate:modelValue":e[0]||(e[0]=t=>i.word1=t),placeholder:"输入第一个单词"},null,512),[[a.Jo,i.word1]]),(0,o.bo)((0,o.Lk)("input",{class:"input-box","onUpdate:modelValue":e[1]||(e[1]=t=>i.word2=t),placeholder:"输入第二个单词"},null,512),[[a.Jo,i.word2]]),(0,o.Lk)("button",{onClick:e[2]||(e[2]=(...t)=>l.queryBridgeWord&&l.queryBridgeWord(...t))},"查询"),(0,o.Lk)("div",_,(0,T.v_)(i.bridgeWordResult),1)])}var P={data(){return{word1:"",word2:"",bridgeWordResult:""}},methods:{async queryBridgeWord(){try{const t=await w.A.get("http://localhost:8081/api/graph/bridge-words",{params:{word1:this.word1,word2:this.word2}}),e=t.data;if(e.startsWith("0")){const t=e.split(" ");3===t.length?this.bridgeWordResult=`No ${t[1]} and ${t[2]} in the graph!`:this.bridgeWordResult=`No ${t[1]} in the graph!`,W.emit("clear-highlight-all")}else if(e.startsWith("1")){const t=e.split(" ").slice(1).join(", ");this.bridgeWordResult=`The bridge words from ${this.word1} to ${this.word2} are: ${t}.`,W.emit("clear-highlight-all"),W.emit("highlight-bridge-words",{word1:this.word1,word2:this.word2,bridgeWords:t.split(", ")})}else this.bridgeWordResult=`No bridge words from ${this.word1} to ${this.word2}!`,W.emit("clear-highlight-all")}catch(t){console.error("查询失败:",t)}}}};const O=(0,L.A)(P,[["render",j],["__scopeId","data-v-d9a7050c"]]);var F=O;const E=t=>((0,o.Qi)("data-v-98b339f2"),t=t(),(0,o.jt)(),t),N={class:"component-box"},S=E((()=>(0,o.Lk)("h3",null,"生成新文本",-1))),X={class:"output-box"};function G(t,e,r,n,i,l){return(0,o.uX)(),(0,o.CE)("div",N,[S,(0,o.bo)((0,o.Lk)("textarea",{class:"input-box","onUpdate:modelValue":e[0]||(e[0]=t=>i.newTextInput=t),placeholder:"输入内容"},null,512),[[a.Jo,i.newTextInput]]),(0,o.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>l.generateNewText&&l.generateNewText(...t))},"生成"),(0,o.Lk)("div",X,(0,T.v_)(i.newTextResult),1)])}var B={data(){return{newTextInput:"",newTextResult:""}},methods:{async generateNewText(){try{const t=await w.A.post("http://localhost:8081/api/graph/new-text",this.newTextInput,{headers:{"Content-Type":"text/plain"}});this.newTextResult=t.data}catch(t){console.error("生成新文本失败:",t)}}}};const J=(0,L.A)(B,[["render",G],["__scopeId","data-v-98b339f2"]]);var M=J;const V=t=>((0,o.Qi)("data-v-6f4ba625"),t=t(),(0,o.jt)(),t),U={class:"component-box"},q=V((()=>(0,o.Lk)("h3",null,"计算最短路径",-1))),z={class:"output-box"};function D(t,e,r,n,i,l){return(0,o.uX)(),(0,o.CE)("div",U,[q,(0,o.bo)((0,o.Lk)("input",{class:"bridge-input-box","onUpdate:modelValue":e[0]||(e[0]=t=>i.startWord=t),placeholder:"输入起点单词"},null,512),[[a.Jo,i.startWord]]),(0,o.bo)((0,o.Lk)("input",{class:"bridge-input-box","onUpdate:modelValue":e[1]||(e[1]=t=>i.endWord=t),placeholder:"输入终点单词"},null,512),[[a.Jo,i.endWord]]),(0,o.Lk)("button",{onClick:e[2]||(e[2]=(...t)=>l.calculateShortestPath&&l.calculateShortestPath(...t))},"计算"),(0,o.Lk)("div",z,(0,T.v_)(i.shortestPathResult),1)])}var H={data(){return{startWord:"",endWord:"",shortestPathResult:""}},methods:{async calculateShortestPath(){try{const t=await w.A.get("http://localhost:8081/api/graph/shortest-path",{params:{word1:this.startWord,word2:this.endWord}}),e=t.data;if(e.startsWith("0")){const t=e.split(" ");3===t.length?this.bridgeWordResult=`No ${t[1]} and ${t[2]} in the graph!`:this.bridgeWordResult=`No ${t[1]} in the graph!`,W.emit("clear-highlight-all")}else if(e.startsWith("\0"))this.shortestPathResult=`No shortest path found from ${this.startWord} to ${this.endWord}!`,W.emit("clear-highlight-all");else{const t=e.split(" "),r=t[0],a=t.slice(1).join(" -> ");this.shortestPathResult=`Length: ${r}; Path: ${a}`,W.emit("highlight-shortest-path",{path:t.slice(1)})}}catch(t){console.error("计算最短路径失败:",t)}}}};const Q=(0,L.A)(H,[["render",D],["__scopeId","data-v-6f4ba625"]]);var Y=Q;const K={class:"component-box"},Z=(0,o.Lk)("h3",null,"随机游走",-1),tt=["disabled"],et=["disabled"],rt={class:"output-box"};function at(t,e,r,a,n,i){return(0,o.uX)(),(0,o.CE)("div",K,[Z,(0,o.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>i.startRandomWalk&&i.startRandomWalk(...t)),disabled:null!==n.timer},"开始",8,tt),(0,o.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>i.stopRandomWalk&&i.stopRandomWalk(...t)),disabled:null===n.timer},"停止",8,et),(0,o.Lk)("div",rt,(0,T.v_)(n.currentWords),1)])}var ot={data(){return{randomWalkResult:[],currentWordIndex:0,currentWords:"",timer:null}},methods:{async startRandomWalk(){try{const t=await w.A.get("http://localhost:8081/api/graph/random-walk");this.randomWalkResult=t.data.split(" "),this.currentWordIndex=0,this.currentWords="",W.emit("clear-highlight-all"),this.startDisplayTimer()}catch(t){console.error("随机游走请求失败:",t)}},startDisplayTimer(){this.timer=setInterval(this.displayNextWord,1e3)},displayNextWord(){this.currentWordIndex<this.randomWalkResult.length?(0!=this.currentWordIndex&&this.currentWordIndex!=this.randomWalkResult.length-1?this.currentWords+=" -> "+this.randomWalkResult[this.currentWordIndex]:this.currentWords+=this.randomWalkResult[this.currentWordIndex],this.currentWordIndex++):this.stopRandomWalk()},stopRandomWalk(){clearInterval(this.timer),this.timer=null}},beforeUnmount(){clearInterval(this.timer)}};const nt=(0,L.A)(ot,[["render",at]]);var it=nt,lt={style:r(4040),components:{GraphVisualization:$,BridgeWords:F,NewTextGeneration:M,ShortestPath:Y,RandomWalk:it}};const st=(0,L.A)(lt,[["render",h]]);var dt=st;const ht=(0,v.A)(),ct=(0,a.Ef)(dt);ct.config.globalProperties.$emitter=ht,ct.mount("#app")}},e={};function r(a){var o=e[a];if(void 0!==o)return o.exports;var n=e[a]={exports:{}};return t[a].call(n.exports,n,n.exports,r),n.exports}r.m=t,function(){var t=[];r.O=function(e,a,o,n){if(!a){var i=1/0;for(h=0;h<t.length;h++){a=t[h][0],o=t[h][1],n=t[h][2];for(var l=!0,s=0;s<a.length;s++)(!1&n||i>=n)&&Object.keys(r.O).every((function(t){return r.O[t](a[s])}))?a.splice(s--,1):(l=!1,n<i&&(i=n));if(l){t.splice(h--,1);var d=o();void 0!==d&&(e=d)}}return e}n=n||0;for(var h=t.length;h>0&&t[h-1][2]>n;h--)t[h]=t[h-1];t[h]=[a,o,n]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};r.O.j=function(e){return 0===t[e]};var e=function(e,a){var o,n,i=a[0],l=a[1],s=a[2],d=0;if(i.some((function(e){return 0!==t[e]}))){for(o in l)r.o(l,o)&&(r.m[o]=l[o]);if(s)var h=s(r)}for(e&&e(a);d<i.length;d++)n=i[d],r.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return r.O(h)},a=self["webpackChunkdirected_graph_frontend"]=self["webpackChunkdirected_graph_frontend"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=r.O(void 0,[504],(function(){return r(5034)}));a=r.O(a)})();
//# sourceMappingURL=app.45ac2737.js.map